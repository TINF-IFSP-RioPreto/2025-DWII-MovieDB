{% extends "layout.jinja2" %}
{% block content %}
    <div class="container d-flex">
        <div class="ms-5 flex-grow-1">
            <ol>
                <li class="my-4">Baixe o <a
                        href="https://play.google.com/store/apps/details?id=com.google.android.apps.authenticator2">Google
                    Authenticador</a>, o <a
                        href="https://play.google.com/store/apps/details?id=com.azure.authenticator">Microsoft
                    Authenticator</a> ou outro programa para geração de códigos para segundo fator
                    de autenticação
                </li>
                <li class="my=4">Configure o autenticador</li>
                <li>
                    <ul>
                        <li>Digitalize o código QR da imagem abaixo, ou</li>
                        <li>Utilizando o token <strong>{{ token }}</strong></li>
                    </ul>
                </li>
                <li>Quando o autenticador estiver configurado, digite o código gerado no campo
                    abaixo
                </li>
            </ol>
            <div class="text-center">
                <img src="data:image/png; base64, {{ imagem }}" alt="Secret token"
                     style="width: 200px;height: 200px"/>
            </div>
        </div>
    </div>
{% endblock %}

{% block footer %}
    <form class="row row-cols-lg-auto g-3 align-items-center" action=""
          method="post" role="form" novalidate autocomplete="off">
        {{ form.csrf_token() }}
        <div class="col ms-auto">
            {{ form.codigo.label(class="visually-hidden") }}
            <div class="input-group">
                <div class="input-group-text">2FA</div>
                {% if form.codigo.errors -%}
                    {{ form.codigo(class="form-control is-invalid") }}
                    {%- for error in form.codigo.errors %}
                        <div class="invalid-feedback d-block">{{ error }}</div>
                    {%- endfor %}
                {%- else -%}
                    {{ form.codigo(class="form-control", placeholder="000000") }}
                {%- endif %}
            </div>
        </div>
        <div class="col me-auto">
            {{ form.submit(class="btn btn-primary") }}
        </div>
    </form>
{% endblock %}
